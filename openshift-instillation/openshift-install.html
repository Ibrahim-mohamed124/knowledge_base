<!--
title: installer binary
description: 
published: true
date: 2025-09-27T09:49:50.676Z
tags: ocp, openshift, installation, implementation
editor: ckeditor
dateCreated: 2025-09-27T09:16:09.274Z
-->

<h1 style="text-align:center;"><strong>Openshfit-install</strong></h1>
<p style="text-align:center;">&nbsp;</p>
<p>Starting with OpenShift Container Platform 4.6, a full-stack installation on bare metal uses the OpenShift installer binary <code><strong>openshift-baremetal-install &nbsp;</strong></code>&nbsp;</p>
<p>&nbsp;</p>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td>Option</td>
        <td>Function</td>
      </tr>
      <tr>
        <td>explain</td>
        <td>explains the fields of InstallConfig APIs</td>
      </tr>
      <tr>
        <td>explain installconfig</td>
        <td>explains the fields of installconfig resource</td>
      </tr>
      <tr>
        <td>log-level debug</td>
        <td>enable debugging mode</td>
      </tr>
      <tr>
        <td>dir</td>
        <td>path to save the generated assets</td>
      </tr>
      <tr>
        <td>create install-config</td>
        <td>creates install-config.yaml</td>
      </tr>
      <tr>
        <td>create manifests</td>
        <td>creates k8s manifests out of install-config.yaml</td>
      </tr>
      <tr>
        <td>create ignition-conifgs</td>
        <td>creates ignition files out of k8s manifests</td>
      </tr>
      <tr>
        <td>create cluster</td>
        <td>deploy a cluster&nbsp;</td>
      </tr>
      <tr>
        <td>wait-for bootstrap-complete</td>
        <td>waits until the bootstrap installation phase ends</td>
      </tr>
      <tr>
        <td>wait-for install-complete</td>
        <td>waits until the cluster instillation ends</td>
      </tr>
      <tr>
        <td>destroy cluster</td>
        <td>delete the cluster</td>
      </tr>
    </tbody>
  </table>
</figure>
<p>&nbsp;</p>
<p>The workflow of cluster creation:</p>
<ol>
  <li>complete the general requirements</li>
  <li>create a directory for the instillation: The OpenShift installer will create the installation directory if it does not exist.</li>
  <li>generate the install-config.yaml</li>
  <li>generate the k8s manifests: which contains the <code>MachineConfigs</code> object that is used in ignition files</li>
  <li>generate the ignition files :</li>
</ol>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Ignition files are valid for 24 hours, after which the included certificates expire. If the cluster installation fails, check the ignition &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;files to see if they are more than 24 hours old. If so, create new ignition files.</p>
<p>&nbsp; 6. deploy the cluster</p>
<p>! &nbsp; In case of UPI instead for using openshift-install create cluster, use the openshfit-install wait-for commands to moniter the cluster installation.</p>
<p>! In UPI, after the installation of bootstrap, it automatically triggers the installation of ocp on the already booted CoreOS hosts</p>
<p>! You can start using the <code>oc</code> command once the bootstrap has the Kubernetes API running on the temporary control plane.</p>
<ul>
  <li><code><strong>export KUBECONFIG=[HOME]/[instillation dir]/auth/kubeconfig</strong></code></li>
  <li><code><strong>Or use the password in kubeadmin-password file</strong></code></li>
</ul>
<p>Useful commands:</p>
<p>&nbsp; - &nbsp;<code><strong>watch 'oc get clusterversion; oc get clusteroperators; \</strong></code>
  &gt; <code><strong>oc get pods --all-namespaces | grep -v -E "Running|Completed"; oc get nodes'</strong></code></p>
<p>&nbsp; - <code><strong>oc get events -A -w</strong></code></p>
<h1 style="text-align:center;">Troubleshooting&nbsp;</h1>
<p style="text-align:center;">Deployment stages &gt; determine the stage by looking at the installation logs</p>
<figure class="table" style="text-align:center;">
  <table>
    <tbody>
      <tr>
        <td><code>Stage 1</code></td>
        <td><code>Stage 2</code></td>
        <td><code>Stage 3</code></td>
      </tr>
      <tr>
        <td>Bootstrap<br>BootKube&nbsp;</td>
        <td>Bootstrap<br>Temp control plane</td>
        <td>Production control plane&nbsp;</td>
      </tr>
      <tr>
        <td>
          <p>After bootstrap deployment by openshfit-installer, two systemd services in the node do some action:</p>
          <ul>
            <li style="text-align:justify;">release-images service: download the required images to start temp control plane</li>
            <li style="text-align:justify;">bootkube service: starts the temp control plane</li>
          </ul>
        </td>
        <td>After the control plane nodes boots, the bootstrap creates a ETCD cluster, and schedules the production control plane to the control nodes</td>
        <td>After complete deployment of production control plane, the clusterversionopeator finished the cluster deployment</td>
      </tr>
    </tbody>
  </table>
</figure>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
