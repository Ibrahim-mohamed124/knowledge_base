<!--
title: Introduction to OCP instillation
description: 
published: true
date: 2025-09-27T08:23:50.571Z
tags: ocp instillation openshift openshift-installer
editor: ckeditor
dateCreated: 2025-09-25T12:51:51.450Z
-->

<p><strong>Ignition files:</strong></p>
<p>Starting files that are generated by openshift-installer binary. These files are used to configure bootstrap, control planes, compute nodes.</p>
<p>Ignition process: consume the ignition files that are generated by either openshift-installer or machine config operator(changes) to configure the ocp machines in the early stage of the installation at the boot of each machine.</p>
<p><strong>Features:</strong></p>
<ul>
  <li>Unifies cloud-init, kickstart in the booting process</li>
  <li>Executed at the initramfs stage</li>
  <li>Data is encoded in base64</li>
</ul>
<p><strong>Location of the Ignition files:</strong></p>
<ul>
  <li>Local disk</li>
  <li>Cloud metadata</li>
  <li>HTTP, HTTPS servers</li>
</ul>
<p>To customize the ignition files edit the install-config.yaml, execute the openshift-installer binary, which creates Kubernetes manifests files from the install-config.yaml, then execute the openshfit-installer again to generate the ignition files from Kubernetes manifests files.</p>
<p>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</p>
<p style="text-align:center;"><strong>Instillation process</strong></p>
<ol>
  <li>Run openshift-installer, which interactively ask for info about the infra on which the ocp will be installed, and creates the install-config.yaml</li>
  <li>The openshift-installer creates the k8s manifests from install-config.yaml, which contain instruction how to build the resources that will install openshift.</li>
  <li>The openshift-installer creates the ignition files from the k8s manifests files, bootstrap.ign, controlplane.ign, and the worker.ign.</li>
  <li>The bootstrap machine starts up and fetches the all ignition files from the initial data source and stores them in the machine configuration server MCS to provide these files the control plane and workers nodes in the future , after finishing the boot process k8s api and the etcd are running on the bootstrap node.</li>
  <li>The control plane boots up and fetches the master.ign from the bootstrap, after being redirected from the initial data source</li>
  <li>The bootstrap starts a control plane node to install ETCD operator, which scales the etcd deployment to 3 using two control planes</li>
  <li>The bootstrap reschedules the control plane components to a master node and move the etcd instance on bootstrap to the master node without etcd. The MCS is moved to the master nodes as well, then bootstrap shuts down.</li>
  <li>The worker nodes start and fetch the worker.ign from the MCS in the master nodes after being redirected from the initial data source</li>
</ol>
<p>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</p>
<p style="text-align:center;">I<strong>nstillation methods</strong></p>
<p>Full-stack Automation&nbsp;(IPI)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Pre-existing Infrastructure(UPI)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Cloud integration (UPI CI) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bare metal (UPI BM).</p>
<p># depending on weather the provider has the openshift machine apis or not it will be UPI CI or UPI BM</p>
<ul>
  <li>Prerequisites:<ul>
      <li><strong>General for both UPI, IPI:</strong>
        <ul>
          <li>Bastion host</li>
          <li>SSH key on the Bastion host to be used for the core user in the worker nodes</li>
          <li>Download openshift-installer, oc</li>
          <li>Get pull-secret to allow pulling ocp images from the redhat registry</li>
          <li>NTP server</li>
          <li>Firewall configurations</li>
        </ul>
      </li>
      <li><strong>UPI:</strong>
        <ul>
          <li>Install RHCOS hosts, and configure network</li>
        </ul>
      </li>
      <li><strong>IPI:</strong>
        <ul>
          <li>Account permissions on the provider and tls certificates</li>
        </ul>
      </li>
      <li><strong>DNS requirements: for UPI</strong>
        <ul>
          <li>Kubernetes API:<ul>
              <li>External: &nbsp;api.&lt;cluster_name&gt;.&lt;base_domain&gt;.<ul>
                  <li>API loadbalancer for the control planes. Must be A or CNAME record and a PTR record</li>
                </ul>
              </li>
              <li>Internal: &nbsp;&nbsp;Resolvable from cluster nodes only |&nbsp; api-int.&lt;cluster_name&gt;.&lt;base_domain&gt;.<ul>
                  <li>API loadbalancer for the control planes. Must be A or CNAME record and a PTR record</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>Routes: Wildcard DNS record for the router pod that runs on the infranodes | *.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;.</li>
          <li>Cluster nodes:&nbsp; &lt;name&gt;.&lt;cluster_name&gt;.&lt;base_domain&gt;.<ul>
              <li>&nbsp;An A and PTR record for each node in the cluster</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<p><strong>Note</strong></p>
<p># By default, when installing OpenShift using the full-stack automation method on supported cloud providers, the OpenShift installer automatically performs the DNS service configuration.</p>
<p>Administrators must configure the DNS service when installing OpenShift using the full-stack automation method on the following infrastructures:</p>
<ul>
  <li>Red&nbsp;Hat OpenStack Platform cloud provider using an external DNS</li>
  <li>VMware vSphere</li>
  <li>Bare metal</li>
</ul>
<p>&nbsp;</p>
<ul>
  <li><strong>Firewall: for UPI</strong>
    <ul>
      <li>network connectivity between the cluster nodes. Also, each cluster&nbsp; &nbsp;node must be able to resolve the host names of all other nodes in the cluster.</li>
    </ul>
  </li>
</ul>
<figure class="table" style="width:877.5pt;">
  <table style="background-color:white;">
    <thead>
      <tr>
        <th style="border-bottom:1.5pt solid #DDDDDD;border-left:1.0pt inset;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:bottom;">Protocol</th>
        <th style="border-bottom:1.5pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:bottom;width:87.8pt;">Port</th>
        <th style="border-bottom:1.5pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:bottom;width:721.0pt;">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">ICMP</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">N/A</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">Network reachability tests</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">TCP</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">9000-9999</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">Host level services, including the node exporter on ports 9100-9101 and the<br>&nbsp;Cluster Version Operator on port 9099</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">TCP</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">10250-10259</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">The default ports that Kubernetes reserves</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">TCP</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">10256</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">openshift-sdn</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">UDP</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">4789</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">VXLAN and Geneve</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">UDP</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">6081</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">VXLAN and Geneve</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">UDP</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">9000-9999</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">Host level services, including the node exporter on ports 9100-9101</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:1.0pt inset;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;">TCP/UDP</td>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">30000-32767</td>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">Kubernetes node port</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:1.0pt inset;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;">TCP</td>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">2379-2380</td>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">etcd server, peer, and metrics ports</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:1.0pt inset;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;">TCP</td>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">6443</td>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">Kubernetes API</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">22623</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">Bootstrap (temporary) and control plane nodes</td>
        <td style="border-bottom:1.0pt solid #DDDDDD;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">Machine Config server</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">443</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">Cluster nodes that run the Ingress router pods</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">&nbsp;</td>
      </tr>
      <tr>
        <td style="border-bottom:1.0pt inset;border-left:1.0pt inset;border-right:1.0pt inset;border-top:1.0pt none;padding:6.0pt;vertical-align:top;">80</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:87.8pt;">Cluster nodes that run the Ingress router pods</td>
        <td style="border-bottom:1.0pt inset;border-left:none;border-right:1.0pt inset;border-top:none;padding:6.0pt;vertical-align:top;width:721.0pt;">&nbsp;</td>
      </tr>
    </tbody>
  </table>
</figure>
<p>&nbsp;</p>
<p style="text-align:center;"><strong>OpenShift Installation Modes</strong></p>
<ol>
  <li style="text-align:justify;">connected</li>
  <li style="text-align:justify;">disconnected</li>
</ol>
<p style="text-align:center;"><strong>Disconnected mode</strong></p>
<p><strong>Prerequisites:</strong></p>
<ul>
  <li>&nbsp;Internal registry that provide API-SCHEMA2 complaint APIs</li>
  <li>Use the exact version of images by using the digest instead of tags</li>
  <li>The internal registry requires access to the internet to mirror the source images from the public registries</li>
  <li>imageContentSources: &nbsp;To point to the source registry and the internal mirror, This customization will configure the file <code>/etc/containers/registries.conf</code> on each cluster node to enable image mirroring.</li>
</ul>
<p><strong>OpenShift clusters in restricted networks have the following limitations:</strong></p>
<ul>
  <li>The <code>ClusterVersion</code> status shows an <code>Unable to retrieve available updates error</code> message.</li>
  <li>By default, the Developer Catalog contents are unavailable because the cluster does not have access to the required image stream tags.</li>
  <li>The OpenShift Telemetry service is disabled.</li>
</ul>
<p>&nbsp;</p>
