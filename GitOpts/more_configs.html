<!--
title: More_configs
description: 
published: true
date: 2025-12-31T05:05:16.162Z
tags: 
editor: ckeditor
dateCreated: 2025-12-31T04:37:31.808Z
-->

<h3>RBAC</h3>
<ul>
  <li>policies are defined in CSV notation and applied to a user or a group</li>
</ul>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td>Project Level objects like applications, logs, exec</td>
        <td>p(policy), &lt;role/user/group&gt;, &nbsp;&lt;resource&gt;,&lt;action&gt;, &lt;project/object&gt;, &lt;effect&gt;</td>
        <td>g(group), user/group, role</td>
      </tr>
      <tr>
        <td>Other resources&nbsp;</td>
        <td>p(policy), &lt;role/user/group&gt;, &nbsp;&lt;resource&gt;,&lt;action&gt;, &lt;object&gt;, &lt;effect&gt;</td>
        <td>g(group), user/group, role</td>
      </tr>
    </tbody>
  </table>
</figure>
<ul>
  <li>Add RBAC policies to the argocd-rbac-cm</li>
</ul>
<pre><code class="language-plaintext">kubectl -n argocd patch configmap argocd-rbac-cm \
--patch='{"data": {"policy.csv": "p, role:create-cluster, clusters, create, *, allow\ng, username, role: create-cluster"}}' </code></pre>
<pre><code class="language-plaintext">argocd account can-i create clusters '*'</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>the \n is for new line</p>
  <p>g(<strong>Group)</strong>: Allows to assign authenticated users/groups to internal roles.</p>
</blockquote>
<pre><code class="language-plaintext">apiVersion: v1
data:
  policy.csv: |-
    p, role:create-cluster, clusters, create, *, allow
    g, test, role: create-cluster
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: argocd-rbac-cm
    app.kubernetes.io/part-of: argocd
  name: argocd-rbac-cm
  namespace: argocd</code></pre>
<ul>
  <li>Argocd supports local users and SSO using dex okta connector</li>
  <li>Local users are stored in argocd-cm by accounts.username: apikey, login and accouts.SID.enabled: “false”</li>
</ul>
<pre><code class="language-plaintext">kubectl -n argocd patch configmap argocd-cm --patch='{"data": {"account.username": "apiKey, login"}}' </code></pre>
<pre><code class="language-plaintext">apiVersion: v1
data:
  account.test: apiKey, login
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/name: argocd-cm
    app.kubernetes.io/part-of: argocd
  name: argocd-cm
  namespace: argocd</code></pre>
<p>&nbsp;</p>
