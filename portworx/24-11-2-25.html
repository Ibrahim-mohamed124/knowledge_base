<!--
title: Egyptian Banks POC
description: 24-11-2025 With Gemy
published: true
date: 2025-11-25T08:50:11.149Z
tags: implementation, portworx, instillation
editor: ckeditor
dateCreated: 2025-11-24T08:29:19.129Z
-->

<ul>
  <li>What are the services for portworx in each worker node??? portworx-ostree.service and portworx-reboot.service<ul>
      <li>These two services exist to ensure graceful termination of the porworx pods in case of system updates or rebooting</li>
    </ul>
  </li>
  <li>portworx-ostree.service:</li>
</ul>
<pre><code class="language-plaintext">[Unit]
Description=PX Ostree Finalizer service
DefaultDependencies=no
After=ostree-finalize-staged.service
Requires=ostree-finalize-staged.service

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStop=/var/opt/pwx/bin/px-runc stop-px-set-pxd-timeout 30

[Install]
WantedBy=ostree-finalize-staged.service
</code></pre>
<ul>
  <li>portworx-reboot.service:</li>
</ul>
<pre><code class="language-plaintext">[Unit]
Description=PX OCI Reboot service
DefaultDependencies=no
Before=systemd-reboot.service

[Service]
Type=forking
ExecStart=/bin/sh -c 'echo "Shutting down Portworx..."; /var/opt/pwx/bin/runc delete -f portworx; echo "Done shutting down Portworx..."; /var/opt/pwx/bin/px-runc set-pxd-timeout 30'

[Install]
WantedBy=halt.target reboot.target shutdown.target
</code></pre>
<ul>
  <li>what are the files in /opt/pwx and /etc/pwx<ul>
      <li>These paths include the pxctl binary, environment var file, and other configuration files:</li>
    </ul>
  </li>
</ul>
<p>/opt/pwx or /var/opt/pwx</p>
<pre><code class="language-plaintext">drwx------. 4 root root 53 Nov  2 14:25 oci
drwxr-x---. 2 root root 65 Nov  2 14:25 bin
drwxr-xr-x. 3 root root 28 Aug  7 15:41 ..
drwxr-xr-x. 4 root root 28 Nov  2 14:25 .
</code></pre>
<p>/etc/pwx</p>
<pre><code class="language-plaintext">ls -al
total 40
drwx------.   3 root root  153 Nov  2 14:25 .
drwxr-xr-x. 107 root root 8192 Nov 14 19:43 ..
drwx------.   2 root root   73 Nov  2 14:26 .lic
-rw-------.   1 root root  266 Aug  7 17:36 .private.json
-rw-------.   1 root root   37 Oct 26 10:10 .px_fspatch
-rw-r--r--.   1 root root 1392 Sep 14 08:35 ccm.properties
-r--r--r--.   1 root root   36 Aug  7 17:36 cluster_uuid
-rw-------.   1 root root  638 Nov  2 14:25 config.json
-rw-r--r--.   1 root root  249 Aug  7 17:36 lttng.config
-rw-------.   1 root root  130 Nov  2 14:25 px_env
</code></pre>
<ul>
  <li><s>when deleting the opertor delete the crd manually? edit something in the labels operation.. </s><mark class="marker-yellow"><s>Still I do not know</s></mark></li>
  <li>instillation resource annotations in the storage cluster.<ul>
      <li>only describe some data about the stc</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">
    portworx.io/health-check: passed
    portworx.io/install-source: https://install.portworx.com/3.3?operator=true&amp;mc=false&amp;kbver=1.31.10&amp;ns=portworx&amp;b=true&amp;iop=6&amp;j=auto&amp;r=17001&amp;c=px-cluster-ocpv-36653693-7847-4764-89da-cdbb8fc00bd7&amp;osft=true&amp;stork=true&amp;csi=true&amp;tel=true&amp;st=k8s
    portworx.io/is-openshift: "true"
    portworx.io/preflight-check: skip
    portworx.io/service-type: portworx-api:LoadBalancer
</code></pre>
<ul>
  <li><s>the configmap on the kube-system?? </s><mark class="marker-yellow"><s>still I do not know what is this</s></mark></li>
  <li><s>storage classes rbd?? rgw?? what are these </s><mark class="marker-yellow"><s>odf info</s></mark></li>
  <li>POC:<ul>
      <li>portworx instillation</li>
      <li>postgresql installation and stress test between the odf and portworx</li>
    </ul>
  </li>
</ul>
<h1>Function of deployments in portworx namspace</h1>
<ol>
  <li><code>px-csi-ext</code><strong> deployment in Portworx is responsible for running the Kubernetes CSI (Container Storage Interface) external sidecar controllers that extend CSI functionality, such as snapshotting, resizing, attaching volumes, and creating the default storageClasses</strong></li>
</ol>
<pre><code class="language-plaintext">  csi:
    enabled: true</code></pre>
<p>&nbsp;2. <strong>The </strong><code>px-plugin</code><strong> deployment in Portworx provides console plugin</strong></p>
