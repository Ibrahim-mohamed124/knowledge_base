<!--
title: Chapter_Five ~ Metal
description: 
published: true
date: 2025-10-25T13:50:01.450Z
tags: 
editor: ckeditor
dateCreated: 2025-10-25T10:39:25.587Z
-->

<h3>GitOps Application Model</h3>
<ul>
  <li><strong>ApplicationSet</strong> custom resource represents Argo CD applications that a controller generates.</li>
  <li><strong>Placement: </strong>For cluster targeting</li>
  <li><strong>ClusterSet: </strong>managed clusters group</li>
  <li><strong>GitOpsCluster &nbsp;</strong>custom resource represents an Argo CD server and its associated placement, to help integrating Argo CD with RHACM's cluster management capabilities.</li>
</ul>
<h3>Push and Pull Models</h3>
<ul>
  <li>In the <i>Push</i> model, the Argo CD server, which is running on the hub cluster,<mark class="marker-yellow"> takes direct action</mark> to deploy application resources to the managed clusters.<ul>
      <li>hub cluster must own the necessary credentials to access and interact with the managed clusters.</li>
      <li>The Argo CD application on the hub cluster actively communicates with the Git repository and then directly applies the manifests to the managed clusters</li>
      <li><mark class="marker-yellow">Push model is the default method</mark> for deploying applications unless you use explicit <mark class="marker-yellow">annotations </mark>to enable the Pull model.</li>
    </ul>
  </li>
  <li>Conversely, in the <i>Pull</i> model, the hub cluster <mark class="marker-yellow">propagates the application resources</mark> to the managed clusters by using a <code>ManifestWork</code> object<ul>
      <li>Each managed cluster individually communicates with the Git repository to deploy the resource manifests locally</li>
      <li>Argo CD server must be running on each target managed cluster, which then deploys the replicated application resources locally.</li>
    </ul>
  </li>
</ul>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td>Push model</td>
        <td>Pull model</td>
      </tr>
      <tr>
        <td>centralized hub cluster has reliable and direct network connectivity to all remote clusters</td>
        <td>the centralized hub cluster cannot start connections to remote clusters, but the remote clusters can communicate back to the centralized cluster</td>
      </tr>
      <tr>
        <td>a managed cluster cannot reach the Git server directly due to network constraints or security policie</td>
        <td>each managed cluster maintains its own copy of the configuration and independently pulls updates from Git.</td>
      </tr>
      <tr>
        <td><mark class="marker-pink">Deploying applications by using the Push model can potentially overload the OpenShift GitOps controller's memory and CPU usage on the hub cluster</mark></td>
        <td><mark class="marker-green">provides significant scalability relief by offloading the direct deployment workload from the hub cluster's controller</mark></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>enhance security because you do not need to centrally store sensitive cluster credentials on the hub cluster for direct push operations to every managed cluster, <strong>Decentralization</strong></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>Reduce the impact of a single point of centralized failure for application delivery</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td>The system excludes the local cluster as a target managed cluster for deployments.</td>
      </tr>
    </tbody>
  </table>
</figure>
<blockquote>
  <p><code>ManifestWork</code> is used to define a group of Kubernetes resources on the hub to be applied to the managed cluster. In the open-cluster-management project, a <code>ManifestWork</code> resource must be created in the cluster namespace. A work agent implemented in <a href="https://github.com/open-cluster-management-io/ocm/tree/main/cmd/work"><u>work</u></a> project is run on the managed cluster and monitors the <code>ManifestWork</code> resource in the cluster namespace on the hub cluster.</p>
</blockquote>
<pre><code class="language-plaintext">apiVersion: work.open-cluster-management.io/v1
kind: ManifestWork
metadata:
  namespace: &lt;target managed cluster&gt;
  name: hello-work-demo
spec:
  workload:
    manifests:
      - apiVersion: apps/v1
        kind: Deployment
        metadata:
          name: hello
          namespace: default
        spec:
          selector:
            matchLabels:
              app: hello
          template:
            metadata:
              labels:
                app: hello
            spec:
              containers:
                - name: hello
                  image: quay.io/asmacdo/busybox
                  command:
                    ["sh", "-c", 'echo "Hello, Kubernetes!" &amp;&amp; sleep 3600']



                    </code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<figure class="image image_resized" style="width:100%;"><img src="/pullmodel.png"></figure>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
