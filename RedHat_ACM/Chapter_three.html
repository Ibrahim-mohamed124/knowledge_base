<!--
title: Chapter_Three ~ Fire
description: 
published: true
date: 2025-10-25T10:39:23.637Z
tags: 
editor: ckeditor
dateCreated: 2025-10-17T18:52:01.980Z
-->

<blockquote>
  <p><i>Governance</i> refers specifically to the set of rules, controls, policies, and resolutions in place to enforce policy standards. RHACM governance provides a policy-based approach for companies to monitor these standards.</p>
</blockquote>
<h3>Use cases of RHACM in governance&nbsp;</h3>
<ul>
  <li><strong>Manage compliance of multiple clusters, and remediates the non conformities by using policy controllers.</strong></li>
  <li><strong>Check for policy violations by</strong>
    <ul>
      <li>Enforce security by using <strong>built-in policies.</strong></li>
      <li>Install <strong>operators </strong>to check for policy violations.</li>
      <li>Detect certificates that are close to expiring or that contain DNS names that fail to match specified patterns across your clusters.</li>
    </ul>
  </li>
  <li><strong>Work across different environments, clouds, datacenters…</strong></li>
</ul>
<h3>Components of RHACM Governance</h3>
<ol>
  <li><strong>RHACM governance dashboard: </strong>displays a list of policies, cluster violations, and policy violations.</li>
  <li><strong>Policy-based governance framework: </strong>supports <mark class="marker-yellow">policy creation and deployment to the managed clusters based on placement rules</mark>.</li>
  <li><strong>Policy controllers:&nbsp;</strong>
    <ul>
      <li>Monitor policies and generate Kubernetes events for violation when the cluster is non-compliant.</li>
      <li>propagate the violations to the hub cluster.</li>
    </ul>
  </li>
  <li><strong>Open source community: </strong>The <code>stolostron/policy-collection</code> repository on GitHub has stable, community policy examples. You can contribute and deploy policies by using GitOps.</li>
</ol>
<h4>Policy-based Governance Framework Architecture</h4>
<ol>
  <li><strong>The policy propagator controller:</strong>
    <ul>
      <li>Generates the policies in the managed cluster namespace, depending on the placements that are bound to the root policy</li>
      <li>Watches Placement, PlacementBinding, PolicyAutomation objects</li>
      <li>Add the compliance state from replicated polices(the ones that it generated in the managed cluster namespaces) to the root policy</li>
      <li>Started the automated processes from policyAutomation objects</li>
    </ul>
  </li>
  <li><strong>The governance policy add-on controller:</strong>
    <ul>
      <li>Manages the installation of policy controllers on managed clusters, and manages the governance policy framework controller on the managed clusters</li>
    </ul>
  </li>
  <li><strong>The governance policy framework controller:</strong>
    <ul>
      <li>Runs as <code>governance-policy-framework</code> pod on managed clusters on the managed clusters. Contains many controllers:<ul>
          <li><code>Spec Sync</code> controller</li>
          <li><code>Status Sync</code> controller</li>
          <li><code>Template Sync</code> controller: monitors policies in the cluster namespace and updates defined objects in the policy templates for any policy change.</li>
          <li><code>Gatekeeper Sync</code> controller: &nbsp;records <code>Gatekeeper</code> constraint audit results as compliance events in the corresponding policies.</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>
<figure class="image image_resized" style="width:100%;"><img src="/governance-architecture-1.svg"></figure>
<h3>RHACM Policy Overview</h3>
<blockquote>
  <p>policy-based framework: Every <code>Policy</code> object requires the <code>policy-templates</code>, <code>Placement</code>, and <code>PlacementBinding</code> templates.</p>
</blockquote>
<ul>
  <li>Policy-template: provide a template inside the Policy object to create policies</li>
  <li>Placement: to target specific clusters</li>
  <li>PlacementBinding: to binds the policy to a placement object</li>
  <li>Policies cannot be created in the managed cluster namespaces, and RHACM will delete it automatically if created</li>
</ul>
<h4>Policy YAML File</h4>
<pre><code class="language-plaintext">apiVersion: policy.open-cluster-management.io/v1 
kind: Policy 
metadata:
  name: &lt; policy-namespace &gt;
  annotations: 
    policy.open-cluster-management.io/standards: NIST SP 800-53 
    policy.open-cluster-management.io/categories: CM Configuration Management 
    policy.open-cluster-management.io/controls: CM-2 Baseline Configuration 
spec:
  remediationAction: inform 
  disabled: false 
  policy-templates: 
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-namespace-example
        spec:
          remediationAction: inform _# the policy-template spec.remediationAction is overridden by the preceding parameter value for spec.remediationAction._
          severity: low
          namespaceSelector:
            exclude: ["kube-*"]
            include: ["default"]
          object-templates:
            - complianceType: musthave
              objectDefinition:
                kind: Namespace _# must have namespace 'prod'_
                apiVersion: v1
                metadata:
                  name: prod
---
apiVersion: policy.open-cluster-management.io/v1
kind: PlacementBinding
metadata:
  name: binding-policy-namespace
placementRef:
  name: placement-policy-namespace
  kind: Placement
  apiGroup: cluster.open-cluster-management.io
subjects:
- name: policy-namespace
  kind: Policy
  apiGroup: policy.open-cluster-management.io
---
apiVersion: cluster.open-cluster-management.io/v1
kind: Placement
metadata:
  name: placement-policy-namespace
spec:
  predicates:
  - requiredClusterSelector:11
      labelSelector:
        matchExpressions:
        - {key: environment, operator: In, values: ["dev"]}
    tolerations:
	- key: cluster.open-cluster-management.io/unavailable
          operator: Exists
        - key: cluster.open-cluster-management.io/unreachable
          operator: Exists</code></pre>
<h3>RHACM Policy Controllers Overview</h3>
<ul>
  <li>Policy controllers monitor whether your cluster complies with a policy, and report the policy status</li>
  <li>Supported controllers<ul>
      <li>Kubernetes Configuration Policy Controller<ul>
          <li>manages, configures, and monitors Kubernetes resources.</li>
          <li>monitors policy violations and remediates them by using the <i>enforce</i> feature.</li>
          <li>install, configure, or retrieve reports from other operators such as a compliance operator.</li>
        </ul>
      </li>
      <li>Certificate Policy Controller<ul>
          <li>monitors certificates for the selected namespaces.</li>
          <li>certificate policy has a namespace selector to exclude or include namespaces</li>
          <li>detects when a certificate is about to expire in the default namespace.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">policy-templates:
  - objectDefinition:
      apiVersion: policy.open-cluster-management.io/v1
      kind: CertificatePolicy
      metadata:
        name: policy-certificate-example
      spec:
        namespaceSelector:
          include:
            - default
          exclude:
            - kube-*
        remediationAction: inform
        severity: low
        minimumDuration: 300h</code></pre>
<p>&nbsp;</p>
<figure class="table">
  <table style="background-color:rgb(255, 255, 255);">
    <thead>
      <tr>
        <th style="padding:5px;vertical-align:top;">Parameter</th>
        <th style="padding:5px;vertical-align:top;">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>severity</code></td>
        <td style="padding:5px;vertical-align:top;">Reports when the policy is non-compliant.</td>
      </tr>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>remediationAction</code></td>
        <td style="padding:5px;vertical-align:top;">You can set the parameter to <code>inform</code>.</td>
      </tr>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>minimumDuration</code></td>
        <td style="padding:5px;vertical-align:top;">The minimum duration for the certificate expiration. For example, if the parameter value is set to <code>300h</code>, and any certificates have an expiration age of fewer than 300 hours, then the policy displays the <code>Not-compliant</code> status.</td>
      </tr>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>minimumCADuration</code></td>
        <td style="padding:5px;vertical-align:top;">The minimum duration for the signing certificate expiration.</td>
      </tr>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>maximumDuration</code></td>
        <td style="padding:5px;vertical-align:top;">The maximum duration for the certificate expiration. For example, if the parameter value is set to <code>300h</code>, and any certificates have an expiration age of more than 300 hours, then the policy displays the <code>Not-compliant</code> status.</td>
      </tr>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>maximumCADuration</code></td>
        <td style="padding:5px;vertical-align:top;">The maximum duration for the signing certificate expiration.</td>
      </tr>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>allowedSANPattern</code></td>
        <td style="padding:5px;vertical-align:top;">You can specify an expression with this parameter. It compares patterns against DNS names. That expression must be present in every SAN entry in the certificates.</td>
      </tr>
      <tr>
        <td style="padding:5px;vertical-align:top;"><code>disallowedSANPattern</code></td>
        <td style="padding:5px;vertical-align:top;">You can specify an expression with this parameter. It compares patterns against DNS names. That expression must not be present in any SAN entry in the certificates.</td>
      </tr>
    </tbody>
  </table>
</figure>
<ul>
  <li>Policy Set Controller<ul>
      <li>place together the policies that are in the same namespace, to deploy them at the same time to a cluster.</li>
      <li>A <code>PolicySet</code> resource requires <code>PlacementBinding</code> to bind the <code>PolicySet</code> and <code>Placement</code> resources.</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">apiVersion: policy.open-cluster-management.io/v1beta1
kind: PolicySet
metadata:
  name: pci
  namespace: default
spec:
  description: Policies for PCI compliance
  policies: 
  - policy-pod
  - policy-namespace
status:
  compliant: NonCompliant
  placement:
  - placementBinding: binding1
    placement: placement1
    policySet: policyset-ps</code></pre>
<p>&nbsp;</p>
<ul>
  <li>Operator Policy Controller<ul>
      <li>install and monitor the Operator Lifecycle Manager (OLM) operators in your clusters</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">apiVersion: policy.open-cluster-management.io/v1
kind: Policy 
metadata:
  name: install-quay
  namespace: open-cluster-management-global-set
spec:
  disabled: false
  policy-templates:
    - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1beta1
        kind: OperatorPolicy 
        metadata:
          name: install-quay
        spec:
          remediationAction: enforce 
          severity: critical
          complianceType: musthave 
          upgradeApproval: None 
          subscription: 
            channel: stable-3.11
            name: quay-operator
            source: redhat-operators
            sourceNamespace: openshift-marketplace </code></pre>
<p>&nbsp;</p>
<h3>Cleaning up</h3>
<pre><code class="language-plaintext">oc delete policy my-policy -n my-namespace

oc delete placementbinding my-placement-binding -n my-namespace

oc delete placementrule my-placement-rule -n my-namespace
</code></pre>
<p>&nbsp;</p>
<p>The <code>pruneObjectBehavior</code> parameter has the following possible values:</p>
<ul>
  <li><code>DeleteIfCreated</code>: This value cleans up any resources that the policy originally created, which is useful for policies that provision new resources.</li>
  <li><code>DeleteAll</code>: This option cleans up all resources that the policy managed, regardless of whether the policy originally created them.</li>
  <li><code>None</code>: With this default value, no related resources are deleted when the policy is removed. You must manually clean up any associated resources.</li>
</ul>
<h2>Policy Generator</h2>
<ul>
  <li>Convert any manifest files to RHACM configuration policies, including files that are created from the <code>kustomize</code> directory.</li>
  <li>Patch the input manifests before they are inserted into a generated RHACM policy.</li>
  <li>Generate additional configuration policies so you can report on Gatekeeper policy violations through RHACM.</li>
  <li>Generate policy sets on the hub cluster.</li>
</ul>
<h4>Interaction with Policy Generator</h4>
<ol>
  <li>By kustomize: by installing policy generator plugin into <code>${HOME}/.config/kustomize/plugin/policy.open-cluster-management.io/v1/policygenerator</code> directory.<ul>
      <li>requirements:<ul>
          <li>kustomization file: With policy-generator config file</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>
<pre><code class="language-plaintext">apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
generators: 
- policy-generator-config.yaml</code></pre>
<p>&nbsp;</p>
<pre><code class="language-plaintext">tree base
base/
├── kustomization.yaml
└── manifest-files
│   └── manifest.yaml &gt; objects to be included in the policy
└── policy-generator-config.yaml &gt; generator config file</code></pre>
<p>&nbsp;</p>
<pre><code class="language-plaintext">apiVersion: policy.open-cluster-management.io/v1 &gt; policy generator config file
kind: PolicyGenerator
metadata:
  name: namespace-existence-policies
policyDefaults:
  namespace: policies 
  severity: low 
  remediationAction: inform 
  complianceType: musthave 
policies: 
  - name: &lt;object_name&gt;
    manifests: 
      - path: /manifest-files/manifest.yaml</code></pre>
<p>&nbsp;</p>
<ul>
  <li>kubectl kustomize --enable-alpha-plugins <code><i>path-to-kustomize-directory</i></code></li>
</ul>
<p><strong>&nbsp; &nbsp;2. The PolicyGenerator command-line tool:</strong></p>
<ul>
  <li><strong>Download from </strong>the <strong>Command Line Tools</strong> page in the RHACM web console</li>
</ul>
<h4>The Policy Generator YAML Structure</h4>
<ul>
  <li><code>policyDefaults</code> section: introduce the default parameters<ul>
      <li>Except for the namespace, <mark class="marker-yellow">any default value that is configured in the </mark><code><mark class="marker-yellow">policyDefaults</mark></code><mark class="marker-yellow"> section is overridden by an entry in the </mark><code><mark class="marker-yellow">policies</mark></code><mark class="marker-yellow"> section</mark>, and any default value that is configured in the <code>policySetDefaults</code> section is overridden by an entry in the <code>policySets</code> section.</li>
    </ul>
  </li>
  <li><code>policies</code> section: Include a list of polices names and the paths of objects that is included in the policy</li>
</ul>
<pre><code class="language-plaintext">tree &lt;dir&gt;
policy-gen/
└── manifest-files
│   └── manifest.yaml
└── policy-generator-config.yaml</code></pre>
<p>&nbsp;</p>
<pre><code class="language-plaintext">PolicyGenerator &lt;dir&gt;/policygenerator.yaml</code></pre>
<h3>Compliance&nbsp;</h3>
<blockquote>
  <p>Compliance management is a continuous process to ensure that IT systems are compliant with the organization's policies and procedures.&nbsp;</p>
</blockquote>
<h2>The RHOCP Compliance Operator</h2>
<blockquote>
  <p>OpenSCAP is an open-source toolkit for automated security compliance, vulnerability assessment, and configuration auditing — especially powerful in Linux and OpenShift environments.</p>
</blockquote>
<ul>
  <li>The compliance operator i<mark class="marker-yellow">nspects Kubernetes objects and the nodes that are running on the cluster to detect any gaps in compliance</mark>. Then inform or remediate the findings</li>
</ul>
<figure class="image image_resized" style="width:100%;"><img src="/policy-compliance-operator.svg"></figure>
<h3>OpenSCAP</h3>
<ul>
  <li>a <strong>Security Content Automation Protocol (SCAP)</strong> compliant scanner that scans for compliance and vulnerabilities.</li>
  <li>OpenSCAP employs community-based compliance content that was developed as part of the <code>ComplianceAsCode/content</code> project that is distributed as a container image to allow rapid updates</li>
  <li>The compliance operator consumes the compliance content from the container image and exposes it in a custom resource.</li>
</ul>
<h3>Compliance Operator Policy</h3>
<ul>
  <li>RHACM uses the compliance operator policy to deploy the compliance operator across a fleet of clusters.</li>
  <li>Creating a compliance operator policy results in the creation of a namespace(openshift-compliance), an OperatorGroup, and a subscription.</li>
</ul>
<h3>Compliance Operator Policy CRDs</h3>
<ul>
  <li>The compliance operator uses custom resource definitions that represent security policy content, the configuration or result, and its scanning processes.</li>
</ul>
<figure class="image image_resized" style="width:100%;"><img src="/compliance_operator.svg"></figure>
<ul>
  <li><strong>ProfileBundle</strong>
    <ul>
      <li>The Compliance operator includes preconfigured <code>ProfileBundle</code> objects. The <code>ProfileBundle</code> object specifies the URL of a container image that contains the content image and the file that contains the compliance content. A <code>ProfileBundle</code> object can specify multiple <code>Profile</code> objects.</li>
      <li>By default, when the compliance operator is deployed, it creates two <code>ProfileBundle</code> objects, one for <code>OCP</code> and one for <code>Red&nbsp;Hat CoreOS</code> (RHCOS).</li>
      <li>Cluster-level scans use the <code>OCP</code> object, and node-level scans use the <code>RHCOS</code> object.</li>
      <li><code><strong>oc get profilebundle.compliance -n openshift-compliance</strong></code></li>
    </ul>
  </li>
  <li><strong>Profile</strong>
    <ul>
      <li>The <code>Profile</code> object defines the rules and variables that can be evaluated for a certain compliance standard. You cannot create or modify the <code>Profile</code> object manually because it is derived from a single <code>ProfileBundle</code> object.</li>
      <li><code><strong>oc get profile.compliance -n openshift-compliance -l compliance.openshift.io/profile-bundle=rhcos4</strong></code></li>
    </ul>
  </li>
  <li><strong>TailoredProfile</strong>
    <ul>
      <li>Use the <code>TailoredProfile</code> object to modify the default <code>Profile</code> object based on your organization requirements. You can enable or disable rules, set variable values, and provide justification for the customization.</li>
    </ul>
  </li>
  <li><strong>ScanSetting</strong>
    <ul>
      <li>The <code>ScanSetting</code> custom resource defines the scan settings:<ul>
          <li>The nodes to scan</li>
          <li>The allocated storage for the results collection</li>
          <li>The time and frequency for the scan</li>
          <li>The retention policy</li>
          <li>The compliance operator creates a <code>ScanSetting</code> object named <code>default</code>.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>ScanSettingBinding</strong>
    <ul>
      <li>The <code>ScanSettingBinding</code> object binds the <code>ScanSetting</code> object with the profiles.</li>
      <li>The <code>ScanSetting</code> and <code>ScanSettingBinding</code> objects generate the <code>ComplianceSuite</code> object.</li>
    </ul>
  </li>
  <li><strong>ComplianceScan</strong>
    <ul>
      <li>The <code>ComplianceScan</code> object represents a single scan and is referenced by the <code>ComplianceSuite</code> object.</li>
    </ul>
  </li>
  <li><strong>ComplianceSuite</strong>
    <ul>
      <li>The <code>ComplianceSuite</code> object is a bundle of <code>ComplianceScan</code> objects and maintains a record of each scan. Although the <code>ComplianceSuite</code> objects are automatically created when the <code>ScanSetting</code> and <code>ScanSettingBinding</code> objects are created, you can create them directly in specific use cases.</li>
    </ul>
  </li>
  <li><code><i><strong>ComplianceCheckResult</strong></i></code>: stores the results of the compliance scan</li>
</ul>
<h2>Integration of Other Policy Engines with RHACM</h2>
<h3><strong>Open Policy Agent (OPA)</strong></h3>
<ul>
  <li>OPA is a general-purpose policy engine, to enforce policies in microservices, Kubernetes, CI/CD pipelines, API gateways, and more.</li>
  <li>Use Rego &nbsp;as<mark class="marker-yellow"> high level</mark> declarative language to write polices, In this way, the application does not have to take decisions as they provided in the policy</li>
</ul>
<h4><strong>OPA gatekeeper</strong></h4>
<ul>
  <li>Gatekeeper is a<strong> </strong>OPA for Kubernetes environments and works as Kubernetes admission controller webhook</li>
  <li>RHACM provides a built-in policy to deploy the OPA gatekeeper operator.</li>
  <li>GateKeeper operator provides constraints and constraint templates to define admission and audit templates for multiple clusters.</li>
  <li>Integration steps:<ol>
      <li>Deployment of gatekeeper operator and creation of gatekeeper custom resource</li>
      <li>Creation of constraints, audit, and admission templates by <mark class="marker-yellow">a configuration policy&nbsp;</mark></li>
    </ol>
  </li>
</ul>
<figure class="image image_resized" style="width:100%;"><img src="/policy-gatekeeper-integration.svg"></figure>
<h4>Installing the Gatekeeper Operator by Using RHACM Governance</h4>
<ul>
  <li>A configuration policy installs the Gatekeeper operator in the targeted cluster or set of clusters based on a placement and creates the <code>Gatekeeper</code> custom resource.</li>
</ul>
<h5>Gatekeeper Custom Resource Configuration</h5>
<ul>
  <li>Exclude namespaces from certain processes for all constraints on your hub cluster.</li>
</ul>
<pre><code class="language-plaintext">apiVersion: operator.gatekeeper.sh/v1alpha1
kind: Gatekeeper
metadata:
  name: gatekeeper
...output omitted...
spec:
  audit:
    logLevel: INFO
    replicas: 1
  mutatingWebhook: Disabled
  validatingWebhook: Enabled
  webhook:
    emitAdmissionEvents: Enabled
    logLevel: INFO
    replicas: 2
  config: 1
    matches:
    - excludedNamespaces: 2
      - test-*
      - my-namespace
      processes: 3
      - '*'
    disableDefaultMatches: false 4</code></pre>
<p>&nbsp;</p>
<ul>
  <li>Gatekeeper operator updates the <code>Config</code> resource within the <code>openshift-gatekeeper-system</code> namespace, and appends the namespaces to exclude.</li>
</ul>
<pre><code class="language-plaintext">oc get configs config \
  -n openshift-gatekeeper-system -oyaml
apiVersion: config.gatekeeper.sh/v1alpha1
kind: Config
metadata:
  name: config
...output omitted...
spec:
  match:
  - excludedNamespaces: 1
    - kube-*
    - multicluster-engine
    - hypershift
    - hive
    - rhacs-operator
    - open-cluster-*
    - openshift-*
    processes:
    - webhook
    - mutation-webhook
  - excludedNamespaces: 2
    - test-*
    - my-namespace
    processes:
    - '*'
...output omitted...</code></pre>
<h4>Deploying Constraints by Using Gatekeeper Policies</h4>
<ul>
  <li>Add constraint templates and constraints to the <code>policy-templates</code> section of a <code>Policy</code> resource.</li>
  <li><code>ConstraintTemplate</code> object defines the schema for the <code>Constraint</code> object, and contains the Rego code to evaluate the policy violation.</li>
  <li>The <code>Constraint</code> object provides the value of the parameters that are defined in <code>ConstraintTemplate</code> object.</li>
</ul>
<pre><code class="language-plaintext">apiVersion: policy.open-cluster-management.io/v1
kind: Policy
metadata:
  name: require-gatekeeper-labels-on-ns
spec:
  remediationAction: inform 1
  disabled: false
  policy-templates:
    - objectDefinition: 2
        apiVersion: templates.gatekeeper.sh/v1beta1
        kind: ConstraintTemplate
        metadata:
          name: k8srequiredlabels
          annotations:
            policy.open-cluster-management.io/severity: low 3
        spec:
          crd:
            spec:
              names:
                kind: K8sRequiredLabels
              validation:
                openAPIV3Schema: 4
                  properties:
                    labels:
                      type: array
                      items: string
          targets:
            - target: admission.k8s.gatekeeper.sh
              rego: | 5
                package k8srequiredlabels
                violation[{"msg": msg, "details": {"missing_labels": missing}}] {
                  provided := {label | input.review.object.metadata.labels[label]}
                  required := {label | label := input.parameters.labels[_]}
                  missing := required - provided
                  count(missing) &gt; 0
                  msg := sprintf("you must provide labels: %v", [missing])
                }
    - objectDefinition: 6
        apiVersion: constraints.gatekeeper.sh/v1beta1
        kind: K8sRequiredLabels
        metadata:
          name: ns-must-have-gk
          annotations:
            policy.open-cluster-management.io/severity: low
        spec:
          enforcementAction: dryrun 7
          
          

          match:
            kinds:
              - apiGroups: [""]
                kinds: ["Namespace"]
            namespaces: 8
              - test-labels-ns
          parameters: 9
            labels: ["gatekeeper"]</code></pre>
<h5>Gatekeeper Admission Webhook</h5>
<pre><code class="language-plaintext">   - objectDefinition:
        apiVersion: policy.open-cluster-management.io/v1
        kind: ConfigurationPolicy
        metadata:
          name: policy-gatekeeper-admission
        spec:
          remediationAction: inform 1
          severity: low
          object-templates:
            - complianceType: mustnothave 2
              objectDefinition:
                apiVersion: v1
                kind: Event
                metadata:
                  namespace: openshift-gatekeeper-system 3
                  annotations:
                    constraint_action: deny 4
                    constraint_kind: K8sRequiredLabels 5
                    constraint_name: ns-must-have-gk 6
                    event_type: violation 7</code></pre>
<p>&nbsp;</p>
<ul>
  <li><code>policy-gatekeeper-admission</code> configuration policy within a RHACM policy to check for Kubernetes API requests that are denied by the Gatekeeper admission webhook.</li>
</ul>
<p>&nbsp;</p>
<h2>Troubleshoot Governance Issues</h2>
<h4>deployment policies</h4>
<ul>
  <li><strong>Definition Issues: </strong>incorrect syntax, missing information in configuration fields, or providing incorrect parameters</li>
  <li><strong>Placement Issues: </strong>Policies must be placed in the correct namespace and cluster for the intended effect.</li>
  <li><strong>Conflict Issues: </strong>multiple policies are applied to the same resource.</li>
  <li><strong>Evaluation Issues: </strong>Policies might not evaluate as expected due to issues with the policy engine or the underlying infrastructure.</li>
  <li><strong>Remediation Issues: </strong>remediation actions violate other policies, cannot be performed successfully, or if issues arise with the policy controller.</li>
  <li>objects to inspect: <code><strong>policy&nbsp;</strong></code></li>
  <li>Use the <code>oc logs</code> command in the <code>open-cluster-management</code> namespace to view the <code>grc-policy-propagator-xxx</code> and <code>grc-policy-addon-controller-xxx</code> component logs. These logs capture the controller activities and policy propagation across clusters.</li>
  <li><code><strong>oc describe operator gatekeeper &nbsp;-n open-cluster-management</strong></code></li>
  <li>oc get managedcluster</li>
  <li>Deploying <code>PolicySets</code> can encounter conflicts when multiple policies require a specific order of application<ul>
      <li>Update the policy resource YAML file with <code>dependencies</code> and <code>extradependencies</code> to define the order for correct deployment.</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">apiVersion: policy.open-cluster-management.io/v1
kind: Policy
metadata:
  annotations:
    policy.open-cluster-management.io/categories: CM Configuration Management
    policy.open-cluster-management.io/controls: CM-2 Baseline Configuration
    policy.open-cluster-management.io/standards: NIST SP 800-53
    policy.open-cluster-management.io/description:
  name: compliance-scan
  namespace: default
spec:
  dependencies: 1
  - apiVersion: policy.open-cluster-management.io/v1
    compliance: Compliant
    kind: Policy
    name: compliance-operator
    namespace: default
  disabled: false
  policy-templates:
  - extraDependencies: 2
    - apiVersion: policy.open-cluster-management.io/v1
      kind: ConfigurationPolicy
      name: scan-setting-binding
      compliance: Compliant
    ignorePending: false</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
