<!--
title: Air
description: 
published: true
date: 2025-10-28T18:20:18.911Z
tags: 
editor: ckeditor
dateCreated: 2025-10-28T17:20:09.568Z
-->

<h1>Updates</h1>
<ul>
  <li>Red&nbsp;Hat released a new software distribution system that provides the upgrade path to update your cluster and the underlying operating system, which enable over-the-air updates</li>
  <li>This distrusted system manages the <mark class="marker-yellow">controller manifests</mark>, cluster roles, and any other resources to update a cluster to a particular version.</li>
  <li>Red&nbsp;Hat hosts and manages this service at <a href="https://console.redhat.com/openshift">https://console.redhat.com/openshift</a>, and hosts cluster images at <a href="https://quay.io/">https://quay.io</a>.</li>
  <li><i><strong>upgrade paths</strong>: the allowed updates for a cluster in a certain channel (stable, fast, candidate…etc), which depends on the duration of subscription and other metrics that are sent to the OTA updates system by cluster telemetric system.</i></li>
  <li><strong>update channels</strong>: Controls the frequency and stability of updates, depending on the existence of bugs in new releases.</li>
</ul>
<blockquote>
  <p>A channel name consists of the following parts: the tier (release candidate, fast, stable, and extended update support), the major version (<code>4</code>), and the minor version (<code>.12</code>).&nbsp;</p>
</blockquote>
<blockquote>
  <p>Red Hat does not offer major-version, in-place upgrades. Similar to the process for upgrading from <mark class="marker-yellow">OpenShift 2 to OpenShift 3</mark>, moving between major versions of OpenShift will require a fresh installation and a migration of applications.&nbsp;</p>
</blockquote>
<ul>
  <li><strong>OTA policy engine: </strong>Determine the upgrade paths</li>
</ul>
<blockquote>
  <p>the question here is that why are we using a general tool to determine the upgrade path for a cluster?? Is not that supposed to be generated according the metrics that the cluster sends to the OTA engine?&nbsp;</p>
</blockquote>
<figure class="table">
  <table>
    <tbody>
      <tr>
        <td>The Candidate Channel</td>
        <td>updates for testing feature acceptance in the next version of OpenShift Container Platform<br>promoted to the <i>fast</i> or <i>stable</i> channels when they meet the quality standards<br>Red&nbsp;Hat does not support the updates that are listed only in the <i>candidate</i> channel.</td>
      </tr>
      <tr>
        <td>The Fast Channel</td>
        <td>
          <p>Development and QA environments.<br>updates as soon as Red&nbsp;Hat declares the given version as a general availability release</p>
          <p>Red&nbsp;Hat supports the updates that are released in this channel</p>
        </td>
      </tr>
      <tr>
        <td>The Stable Channel</td>
        <td>production environments<br>updates in the <i>fast</i> channel are enabled in the <i>stable</i> channel If operational clusters pass additional testing and validation<br><mark class="marker-yellow">If Red&nbsp;Hat observes operational issues from a </mark><i><mark class="marker-yellow">fast</mark></i><mark class="marker-yellow"> channel update, then that update is skipped in the </mark><i><mark class="marker-yellow">stable</mark></i><mark class="marker-yellow"> channel.</mark><br>Red&nbsp;Hat supports the updates that are released in this channel</td>
      </tr>
      <tr>
        <td>The Extended Update Support Channel</td>
        <td>Red&nbsp;Hat denotes all even-numbered minor releases as Extended Update Support (EUS) releases.<br>EUS releases have no difference between <code>stable-4.<i>x</i></code> and <code>eus-4.<i>x</i></code> channels (where <code><i>x</i></code> denotes the even-numbered minor release) until OpenShift Container Platform moves to the EUS phase. You can switch to the EUS channel as soon as it becomes available.</td>
      </tr>
    </tbody>
  </table>
</figure>
<blockquote>
  <h3><strong>Update Path</strong></h3>
  <p>An update path is a <strong>validated transition</strong> from one OpenShift version to another.</p>
  <p>It can be:</p>
  <p><strong>Z-stream</strong>: 4.16.1 → 4.16.2 (within the same channel)</p>
  <p><strong>Minor version jump</strong>: 4.16.2 → 4.17.0 (requires switching to <code>stable-4.17</code>)</p>
  <p>Red Hat defines these paths in the <strong>OpenShift Update Graph</strong>, ensuring safety and compatibility.</p>
</blockquote>
<h3>Upgrade Paths</h3>
<ul>
  <li>You can apply each of the upgrade channels to a Red&nbsp;Hat OpenShift Container Platform version 4.14 cluster in different environments. The following paragraphs describe an example scenario where the<mark class="marker-yellow"> 4.14.3 version has a defect.</mark></li>
</ul>
<ol>
  <li><strong>Stable channel:&nbsp;</strong>
    <ul>
      <li>When using the <code>stable-4.14</code> channel, you can upgrade your cluster from 4.14.0 to 4.14.1 or to 4.14.2. If an issue is discovered in the 4.14.3 release, then you cannot upgrade to that version. When a patch becomes available in the 4.14.4 release, you can update your cluster to that version.</li>
      <li>This channel is suited to production environments, because the Red&nbsp;Hat SRE teams and support services test the releases in that channel.</li>
    </ul>
  </li>
  <li><strong>Fast channel</strong>
    <ul>
      <li>The <code>fast-4.14</code> channel can deliver 4.14.1 and 4.14.2 updates but not 4.14.3. Red&nbsp;Hat also supports this channel, and you can apply it to development, QA, or production environments.</li>
      <li>Administrators must<mark class="marker-yellow"> specifically choose a different minor version channel,</mark> such as <code>fast-4.14</code>, <mark class="marker-yellow">to upgrade to a new release in a new minor version when it becomes available.</mark></li>
    </ul>
  </li>
  <li><strong>Candidate channel</strong>
    <ul>
      <li>You can use the <code>candidate-4.14</code> channel to install the latest features of OpenShift. With this channel, you can upgrade to all <i>z-stream</i> releases, such as 4.14.1, 4.14.2, and 4.14.3.</li>
      <li>You use this channel to access the latest features of the product as they get released. This channel is suited to development and pre-production environments.</li>
    </ul>
  </li>
  <li><strong>EUS channel</strong>
    <ul>
      <li>When switching to the <code>eus-4.14</code> channel, the <code>stable-4.14</code> channel does not receive <i>z-stream</i> updates until the next EUS version becomes available.</li>
    </ul>
  </li>
</ol>
<blockquote>
  <p>To ensure the stability of the cluster and the proper level of support, switch only from a <i>stable</i> channel to a <i>fast</i> channel. Although it is possible to<mark class="marker-yellow"> switch from a </mark><i><mark class="marker-yellow">stable</mark></i><mark class="marker-yellow"> channel or a </mark><i><mark class="marker-yellow">fast</mark></i><mark class="marker-yellow"> channel to a </mark><i><mark class="marker-yellow">candidate</mark></i><mark class="marker-yellow"> channel, it is not recommended</mark></p>
</blockquote>
<pre><code class="language-plaintext">oc patch clusterversion version --type="merge" --patch '{"spec":{"channel":"fast-4.14"}}'</code></pre>
<h3>Pausing the Machine Health Check Resource</h3>
<ul>
  <li>During the upgrade process, nodes in the cluster might become temporarily unavailable. In the case of worker nodes, <mark class="marker-yellow">the machine health check might identify such nodes as unhealthy and reboot them</mark>. To avoid rebooting such nodes, pause all the machine health check resources before updating the cluster.</li>
</ul>
<pre><code class="language-plaintext">oc get machinehealthcheck -n openshift-machine-api
oc annotate machinehealthcheck -n openshift-machine-api \
  machine-api-termination-handler cluster.x-k8s.io/paused=""
oc annotate machinehealthcheck -n openshift-machine-api \
  machine-api-termination-handler cluster.x-k8s.io/paused-</code></pre>
<h3>Over-the-air Updates</h3>
<figure class="image image_resized" style="width:100%;"><img src="/updates-telemetry-back-end.svg"></figure>
<ul>
  <li>The Update Process<ul>
      <li><strong>Machine Config Operator</strong>
        <ul>
          <li>The Machine Config Operator<mark class="marker-yellow"> applies the desired machine state to each of the nodes</mark>. This component also<mark class="marker-yellow"> handles the rolling upgrade of nodes in the cluster, and uses CoreOS Ignition as the configuration format</mark>.</li>
        </ul>
      </li>
      <li><strong>Operator Lifecycle Manager</strong>
        <ul>
          <li>The<mark class="marker-yellow"> OLM orchestrates updates to any operators that are running in the cluster.</mark></li>
        </ul>
      </li>
      <li><mark class="marker-pink">The updates use the </mark><code><mark class="marker-pink">rpm-ostree</mark></code><mark class="marker-pink"> technology for managing transactional upgrades. Updates are delivered via container images and are part of the OpenShift update process. When the update deploys, the nodes pull the new image, extract it, write the packages to the disk, and then modify the bootloader to boot into the new version.</mark></li>
    </ul>
  </li>
</ul>
<h4>Update the Cluster by Using the Command Line</h4>
<ul>
  <li>Be sure to u<mark class="marker-yellow">pdate all operators that are installed through the OLM to the 4.14 version before updating the OpenShift cluster.</mark></li>
  <li>Retrieve the cluster version and review the current update channel information. If you are running the cluster in production, then ensure that the channel reads <code>stable</code>.</li>
</ul>
<pre><code class="language-plaintext">[user@host ~]$ oc get clusterversion
NAME      VERSION   AVAILABLE   PROGRESSING   SINCE   STATUS
version   4.14.0    True        False         2d      Cluster version is 4.14.0

[user@host ~]$ oc get clusterversion -o jsonpath='{.items[0].spec.channel}{"\n"}'
stable-4.14</code></pre>
<ul>
  <li>View the available updates and note the version number of the update to apply.</li>
</ul>
<pre><code class="language-plaintext">[user@host ~]$ oc adm upgrade
Cluster version is 4.14.0

Upstream is unset, so the cluster will use an appropriate default.
Channel: stable-4.14 (available channels: candidate-4.14, candidate-4.15, eus-4.14, fast-4.14, stable-4.14)

Recommended updates:

VERSION    IMAGE
4.14.10    quay.io/openshift-release-dev/ocp-release@sha256:...
...output omitted...</code></pre>
<ul>
  <li>Apply the latest update to your cluster, or update to a specific version:</li>
  <li>Run the following command to install the latest available update for your cluster.</li>
</ul>
<pre><code class="language-plaintext">[user@host ~]$ oc adm upgrade --to-latest=true</code></pre>
<ul>
  <li>Run the following command to install a specific version. <i>VERSION</i> corresponds to one of the available versions that the <code>oc adm upgrade</code> command returns.</li>
</ul>
<pre><code class="language-plaintext">[user@host ~]$ oc adm upgrade --to=VERSION</code></pre>
<ul>
  <li>The previous command initializes the update process. Run the following command t<mark class="marker-yellow">o review the status of the Cluster Version Operator (CVO) and the installed cluster operators.</mark></li>
</ul>
<pre><code class="language-plaintext">[user@host ~]$ oc get clusterversion
NAME     VERSION  AVAILABLE  PROGRESSING  SINCE  STATUS
version  4.14.0   True       True         1m     Working towards 4.14.10 ...

[user@host ~]$ oc get clusteroperators
NAME                       VERSION     AVAILABLE   PROGRESSING   DEGRADED  ...
authentication             4.14.0      True        False         False     ...
baremetal                  4.14.10     False       True          False     ...
cloud-controller-manager   4.14.10     True        False         True      ...
...output omitted...</code></pre>
<ul>
  <li>Use the following command to review the cluster version history and monitor the status of the update. It might take some time for all the objects to finish updating.<ul>
      <li>The history contains a list of the most recent versions that were applied to the cluster. This list is updated when the CVO applies an update. The list is ordered by date, where the newest update is first in the list.</li>
      <li>If the rollout completed successfully, then updates in the history have a <code>Completed</code> state. Otherwise, <mark class="marker-yellow">the update has a </mark><code><mark class="marker-yellow">Partial</mark></code><mark class="marker-yellow"> state if it failed or did not complete.</mark></li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">[user@host ~]$ oc describe clusterversion
...output omitted...
  History:
    Completion Time:    2024-02-10T04:38:12Z
    Image:              quay.io/openshift-release-dev/ocp-release@sha256:...
    Started Time:       2024-02-10T03:35:05Z
    State:              Partial
    Verified:           true
    Version:            4.14.10
    Completion Time:    2024-02-10T12:39:02Z
    Image:              quay.io/openshift-release-dev/ocp-release@sha256:...
    Started Time:       2024-02-10T12:23:14Z
    State:              Completed
    Verified:           false
    Version:            4.14.10</code></pre>
<ul>
  <li>After the process completes, you can confirm that the cluster is updated to the new version.</li>
</ul>
<pre><code class="language-plaintext">[user@host ~]$ oc get clusterversion
NAME     VERSION  AVAILABLE  PROGRESSING  SINCE  STATUS
version  4.14.10  True       False        30m    Cluster version is 4.14.10</code></pre>
