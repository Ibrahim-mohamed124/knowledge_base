<!--
title: HA
description: 
published: true
date: 2025-11-25T15:37:39.731Z
tags: 
editor: ckeditor
dateCreated: 2025-11-25T15:29:40.716Z
-->

<h4>Fencing Hosts for VM Integrity</h4>
<ul>
  <li><i>fencing: is the isolation of &nbsp;misbehaved vm to prevent running the same workload in more than one host , which leads to data corruption, and eventually the service will be down.</i></li>
  <li><i>remediation: &nbsp; is the creation of new vm after a failure</i></li>
</ul>
<blockquote>
  <p>A traditional hypervisor uses an out-of-band management agent to fence a nonresponsive host. The <mark class="marker-yellow">agent forces a power-off</mark>, which ensures that the host and its virtual machines are down. <mark class="marker-yellow">Only then does the agent start the virtual machine on a new host.</mark></p>
</blockquote>
<ul>
  <li>in OpenShift: Fencing is a remediation method that reboots and deletes <code>Machine</code> custom resource definitions to solve problems with automatically provisioned nodes.</li>
  <li><strong>Machine health checks:&nbsp;</strong>
    <ul>
      <li>Machine health checks<mark class="marker-yellow"> automatically remediate an unhealthy machine (worker nodes)</mark>, which is the host for a node, if the machine exists in a particular machine pool.</li>
      <li>When the <code>MachineHealthCheck</code> controller detects that a node is in the <code>NotReady</code> state, it removes the associated <code>Machine</code> resource, and the node is deleted from the pool host.</li>
    </ul>
  </li>
  <li><strong>Sticky sessions:</strong>
    <ul>
      <li>Sticky sessions enable stateful application traffic by ensuring that all traffic hits the same endpoint.</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">apiVersion: route.openshift.io/v1
kind: Route
metadata:
  annotations:
    router.openshift.io/cookie_name: "hello"
...output omitted...</code></pre>
<h4>The Node Maintenance Operator</h4>
<ul>
  <li><code>NodeMaintenance</code> custom resource: declaratively place nodes into maintenance</li>
  <li>During node drain, OpenShift Virtualization migrates VMs &nbsp;with &nbsp;liveMigrate strategy live. For VMs with the eviction strategy of <code>None</code>, OpenShift Virtualization shuts down the VMs, and then restarts them on another node.</li>
</ul>
<blockquote>
  <p>Even though the eviction strategy is set, some VMs might not support live migration. For example, OpenShift Virtualization can live migrate only VMs with storage that supports the <code>ReadWriteMany</code> (RWX) access mode.</p>
  <p>These VMs prevent the drain process from completing. A cluster administrator must manually shut down the VM or disable the live migration.</p>
</blockquote>
