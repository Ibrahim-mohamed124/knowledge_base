<!--
title: Service Mesh
description: 
published: true
date: 2025-12-20T07:54:47.825Z
tags: 
editor: ckeditor
dateCreated: 2025-12-19T20:00:13.689Z
-->

<h1>What are Service Mesh</h1>
<ul>
  <li>Helps adding new features to applications without having to modify the &nbsp;source code. In other words, service mesh adds intelligence without rework.</li>
  <li>This code be achieved by sidecar or sidecarless strategies</li>
  <li>Benefits:<ul>
      <li>Traffic management</li>
      <li>observability</li>
      <li>mTLS</li>
      <li>Resilience</li>
      <li>Decoupling network logic from application logic</li>
      <li>Consistency</li>
      <li>Version Control</li>
    </ul>
  </li>
  <li>Cilium work by a sidecar-less strategy only for layer 3 and 4 (eBPF), layer 7 features use only one sidecar server for all the pods ( one extra hop )</li>
</ul>
<h3>cilium ingress</h3>
<ul>
  <li>Ingress is implemented by eBPF programs and envoy</li>
  <li>in the values.yaml change ingressController.enabled to true and ingressController.default to true. Then, just set nodePort.enabled to ture if cilium replaced kubeproxy</li>
  <li>loadbalancerMode: shared or dedicated</li>
  <li>cilium creates an ingressClass and use it as the default one</li>
</ul>
<pre><code class="language-plaintext">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ingress
spec:
  ingressClassName: cilium
  rules:
  - host: ""
    http:
     paths:
     - pathType: Prefix
       path: "/"
       backend:
         service:
           name: 
           port:
             number: 
     - pathType: Prefix
       path: ""
       backend:
         service:
           name: 
           port:
             number: 
  - host: ""
    http:
     paths:
     - pathType: Prefix
       path: ""
       backend:
         service:
           name: 
           port:
             number: 
  - http:                                          &gt;&gt;&gt; the defaul path if no rule is matched
      paths:
       - pathType: Prefix
         path: /
         backend:
          service:
            name: test
            port:
              number: </code></pre>
<h3>Gateway API</h3>
<h6>Limitations of Ingress Controller</h6>
<ul>
  <li>Only match on the host and path</li>
  <li>No traffic splitting</li>
  <li>ONLY support HTTP/S</li>
  <li>No RateLimiting</li>
  <li>All the configuration is in the ingress object</li>
  <li>Cannot change the headers of a request/respone</li>
</ul>
<h6>Gateway API</h6>
<ul>
  <li>&nbsp; Separation of Concerns:<ul>
      <li>GatewayClass: what type of gateway controller will be used?? Nginx, others?? built by the infra team</li>
      <li>Gateway: configure an instance of the gateway controller &nbsp;built by platform operator&nbsp;</li>
      <li>HTTPRoute, TCPRoute, GRCPRoute: is the configuration for a specific endpoint built by the developer</li>
    </ul>
  </li>
  <li>Cross namespaces: Gateway API is able to route traffic to different specific namespaces and prevent other namespaces to attach endpoints to the gatgeway</li>
</ul>
