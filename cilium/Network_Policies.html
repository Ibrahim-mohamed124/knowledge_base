<!--
title: Network Policies
description: 
published: true
date: 2025-12-15T17:54:12.511Z
tags: 
editor: ckeditor
dateCreated: 2025-12-14T10:26:09.443Z
-->

<h2>The advantages of cilium network polices</h2>
<ul>
  <li>Cilium is able to <mark class="marker-yellow">control traffic at the layer 7 </mark>unlike the simple network policies that work on later 2 and 3 only</li>
  <li>Cilium is able to<mark class="marker-yellow"> match endpoints by &nbsp;(ICMP, DNS)</mark>
    <ul>
      <li>spec.ingress[].from.fwdn.matchDNS &nbsp;&gt; allow only traffic to the IPs that came from resolving this DNS name unlike other networkpolicies that need specific IPs.</li>
    </ul>
  </li>
  <li>Cilium is able to <mark class="marker-yellow">match pods by their service accounts</mark></li>
  <li>Multi-Cluster policy:<ul>
      <li>podSelector.matchLabels.cluster</li>
    </ul>
  </li>
  <li>Deny policies<ul>
      <li>spec.ingressDeny</li>
    </ul>
  </li>
  <li>Cluster-wide policies</li>
</ul>
<h3>cilium network policy</h3>
<pre><code class="language-plaintext">apiVersion: "cilium.io/v2"
kind: CiliumNetworkPolicy
metadata:
  name: "layer 3"
  namespace: test
spec:
  endpointSelector:
    matchLabels:
       key: value
  ingress:
   - fromEndpoints:
   	  - {}
  egress:
   - toEndpoints:
    - matchLabels:
       key: value</code></pre>
<ul>
  <li>to match endpoints to services</li>
</ul>
<pre><code class="language-plaintext">spec:
	egress:
	- toServices:
	  - k8sService:
	      serviceName: test
	      namespace: test
     - k8sServiceSelector:
         selector:
           matchlabels:
             test: test2
         namespace: test2</code></pre>
<ul>
  <li>to match on DIDR</li>
</ul>
<pre><code class="language-plaintext">egress:
- toCIDR:
  - 0.0.0.0/0
- toCIDRSet:
  - cidr: 0.0.0.0/0
    except:
     - 0.0.0.0/0</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
