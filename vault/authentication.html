<!--
title: Auth methods
description: 
published: true
date: 2025-10-08T13:21:19.533Z
tags: vault, authentication
editor: ckeditor
dateCreated: 2025-10-08T11:18:20.127Z
-->

<h1>Auth methods</h1>
<ol>
  <li>validate and assign polices to users by using tokens</li>
  <li>multiple auth methods can be used</li>
  <li>the fundamental goal of auth methods is to obtain a vault token</li>
  <li>must be enabled and configured before usage</li>
</ol>
<h2>Tokens auth method</h2>
<ol>
  <li>Enabled by default and cannot be disabled</li>
  <li>Responsible for generating and storing tokens</li>
  <li>Authentication with external LDAP, OIDC will generate a token</li>
</ol>
<h2>Workflow</h2>
<ol>
  <li>client &gt; vault &gt; backend Idp</li>
  <li>idp &gt; vault &gt; generate token with a policy and TTL</li>
  <li>vault token &gt; client</li>
  <li>client token &gt; vault</li>
</ol>
<h2>Operations</h2>
<ul>
  <li>Any change on the auth methods needs a token with enough privileges even the user is already authenticated</li>
</ul>
<pre><code class="language-plaintext">$ vault auth enable &lt;method&gt; 
$ vault auth disable &lt;mount&gt;
$ vault auth list
$ vault auth tune  | to cofigure the parameters of auth methods like TTL
$ vault auth help &lt;method&gt; | more info about an auth method</code></pre>
<p>&nbsp;</p>
<pre><code class="language-plaintext">$ vault write auth/mount/role[user]/role[user]_name options | ex. secret_id_ttl=10m, 	token_ttl=1m </code></pre>
<ul>
  <li>after authentication by using a token, a token helper ( saves token info in a local file .vault-token ) that inject the token in very cli command to avoid logging in many times</li>
  <li>token can be saved in VUALT_TOKEN= environment &nbsp;variable</li>
  <li>Response format can be managed by VUALT_FORMAT=json</li>
</ul>
<pre><code class="language-plaintext">$ vault login -method=auth_method_type</code></pre>
<h2>Entities&nbsp;</h2>
<ul>
  <li>Vault creates new entities to new logins and attach an alias to them, using the <strong>identity secrets engine</strong> ( manages all vault identities )</li>
  <li>an entity represents a user, and cloud have zero or more aliases&nbsp;</li>
  <li>alias: Mapping between entities and auth_methods.<ul>
      <li>composed of an auth_method, identification and a policy</li>
    </ul>
  </li>
  <li>vault uses entities to track the logging in and out of users</li>
  <li>can be created manually</li>
  <li>Entity: contains alias, entity_id, policies, metadata</li>
  <li>If an entity(manually created) has many aliases<ul>
      <li>the entity itself has some polices</li>
      <li>the alias has some other polices &nbsp;</li>
      <li>when a user logs in using a auth_method of an alias, they will have the polices ( in the token ) of both the log-in method and the manually created entity</li>
    </ul>
  </li>
</ul>
<h2>Identity Group</h2>
<ul>
  <li>cloud have subgroups</li>
</ul>
<h3>Types of groups</h3>
<ol>
  <li>&nbsp;Internal group: group entities to propagate identical policies, created manually<ul>
      <li>used in vault namespaces to propagate permissions to child namespaces</li>
    </ul>
  </li>
  <li>&nbsp;External group: infer from auth methods(backend idp), created manually or automatically<ul>
      <li>group name must match the group name in the idp</li>
    </ul>
  </li>
</ol>
