<!--
title: Intro
description: 
published: true
date: 2025-10-07T07:52:47.059Z
tags: iac, vault, hashicorp
editor: ckeditor
dateCreated: 2025-10-06T20:02:56.809Z
-->

<h1>Vault</h1>
<ul>
  <li>Manage secrets and sensitive data</li>
  <li>provide single source of secrets</li>
  <li>Complete lifecycle management of secrets</li>
  <li>Provide governance for secrets access</li>
  <li>Dynamically secret generation</li>
  <li>Encryption as a service</li>
  <li>Root or intermediate certificates automatically &gt; PKI</li>
</ul>
<h2>How It Works?</h2>
<ol>
  <li>Authenticate &gt; temporary token generation</li>
  <li>Authorize &nbsp;&gt; specified in the token</li>
  <li>Operations</li>
</ol>
<h2>Components</h2>
<ol>
  <li>Storage Backends &gt; raft, consul</li>
  <li>Secret engines &gt; store, generate, encrypt data</li>
  <li>Authentication methods</li>
  <li>Audit devices</li>
</ol>
<h3>Storage Backends&nbsp;</h3>
<ul>
  <li>Configured in the main vault conf file</li>
  <li>each storage backends has different parameters</li>
  <li>Data is encrypted in-transit and at rest</li>
  <li>one storage backend per vault cluster</li>
</ul>
<h3>Secret Engines&nbsp;</h3>
<ul>
  <li>Secret Management</li>
  <li>Store, generate, and encrypt data</li>
  <li>Dynamic credentials generation&nbsp;</li>
  <li>More than one secret engine can be enabled in one cluster (different or the same secret engine)</li>
  <li><mark class="marker-green">Isolated by using paths&nbsp;</mark></li>
</ul>
<h3>Auth Methods</h3>
<ul>
  <li>user validation and assigning policies to users by generating tokens</li>
  <li>Multiple authentication methods can be used in one cluster &gt; for humans, machines..</li>
  <li>Token: includes policies and TTL</li>
</ul>
<h4>Audit Devices</h4>
<ul>
  <li>Json formatted logs for requests and responses&nbsp;</li>
  <li>Sensitive Information is hashed</li>
  <li>Many audit devices can be used &gt; non is enabled by default<ul>
      <li><mark class="marker-green">the log must be written first before responding to a client!</mark></li>
    </ul>
  </li>
</ul>
<h2>Architecture&nbsp;</h2>
<figure class="image image_resized" style="width:100%;"><img src="https://kodekloud.com/kk-media/image/upload/v1752878228/notes-assets/images/HashiCorp-Certified-Vault-Associate-Certification-Vault-Architecture-and-Pathing-Structure/vault-system-architecture-components-diagram.jpg" alt="The image illustrates the architecture of a Vault system, showing components like the core, token store, audit devices, and storage backend, along with API interaction and encrypted storage."></figure>
<ul>
  <li>Barrier: A virtual fence around the core components of vault (every thing expect the storage backend, the GUI(http/s), and the API)<ul>
      <li>Any data the move through the Barrier is encrypted and decrypted at the Barrier, and the Barrier needs authentication tokens to perform any actions as well.</li>
    </ul>
  </li>
  <li>Path: a prefix that tell the core where to route the secret to secret engines, auth methods, and audit devices.</li>
  <li>Mount: a path at which the secret engines, auth methods, and audit devices are mounted and receive requests&nbsp;</li>
  <li>System backend: is the default backend that is mounted at the /sys endpoint</li>
  <li>Each component has its default endpoint /, and it can be configured using the -path flag (expect the reserved pathes)</li>
  <li>Master Key:&nbsp;<ul>
      <li>is used to encrypt and decrypt the encryption key</li>
      <li>Generated during vault initialization or rekeying</li>
      <li>Never written to storage with the unseal mechanisms, but it is written under the core/master when using auto seal in the storage backend(encrypted)</li>
    </ul>
  </li>
  <li>Encryption Key:&nbsp;<ul>
      <li>Stored with the data in a keyring</li>
      <li>Can be rotated manually</li>
    </ul>
  </li>
</ul>
<blockquote>
  <ul>
    <li><strong>Keyring</strong>: A secure, in-memory collection of cryptographic keys used by Vault to encrypt and decrypt data.</li>
  </ul>
</blockquote>
<h3>Seal and Unseal states</h3>
<ul>
  <li>Vault starts in a sealed state: vault can reach the data but cannot decrypt it ( no operations are allowed at all),&nbsp;</li>
  <li>Unsealed state: vault nodes can reconstruct the master key to decrypt the encryption key, then decrypt the data, and the nodes stores the encryption key in their memory</li>
  <li>Sealing again: &nbsp;purge all the encryption keys in the memory</li>
  <li>&nbsp;</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
