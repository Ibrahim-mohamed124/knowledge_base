<!--
title: Migration From SDN to OVN
description: 
published: true
date: 2026-01-13T10:20:38.082Z
tags: 
editor: ckeditor
dateCreated: 2026-01-13T08:53:05.970Z
-->

<h1>Methods of Migration</h1>
<ol>
  <li>Ansible palybooks for offline migration automation</li>
  <li>Offline Migration used for on-prem clusters</li>
  <li>Limited live migration to automatically migrate from SDN to OVN</li>
</ol>
<h3>Limited Live Migration</h3>
<ul>
  <li>No service interruption</li>
  <li>supported on vmware, baremetal, nutanix, and openstack</li>
</ul>
<h3>Prerequisites from this <a href="https://access.redhat.com/solutions/7057169">article&nbsp;</a></h3>
<ul>
  <li><code>EgressIP</code> functionality is disabled during a limited live migration<ul>
      <li>Look for usage of <code>EgressIP</code> in your cluster by checking for <code>egressIPs</code> or <code>egressCIDRs</code> on your <code>NetNamespace</code> and <code>HostSubnet</code> objects</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">oc get netnamespace -A | awk '$3 != ""'</code></pre>
<p>&nbsp;</p>
<pre><code class="language-plaintext">oc get hostsubnet | awk '$5 != ""'</code></pre>
<p>&nbsp;</p>
<blockquote>
  <p>EgressIP is a CRD allowing the user to define a fixed source IP for all egress traffic originating from any pods which match the EgressIP resource according to its spec definition.</p>
</blockquote>
<ul>
  <li>check for <strong>EgressNetworkPolicy</strong></li>
</ul>
<pre><code class="language-plaintext">oc get egressnetworkpolicies.network.openshift.io -A</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>Egress Router</strong>
    <ul>
      <li>The <code>EgressRouter</code> functionality will not work during the limited live migration, is not automatically migrated, and is required to be reconfigured once the migration is complete, check the existence of Egress router pods</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">oc get pods --all-namespaces -o json | jq '.items[] | select(.metadata.annotations."pod.network.openshift.io/assign-macvlan" == "true") | {name: .metadata.name, namespace: .metadata.namespace}'</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>Multicast</strong>
    <ul>
      <li><code>Multicast</code> functionality is disabled during a limited live migration</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">oc get netnamespace -o json | jq -r '.items[] | select(.metadata.annotations."netnamespace.network.openshift.io/multicast-enabled" == "true") | .metadata.name'</code></pre>
<p>&nbsp;</p>
<ul>
  <li><strong>Multitenant Isolation Mode</strong>
    <ul>
      <li>This feature is only supported by <code>OpenShift-SDN</code> and will stop working during and after the migration is completed</li>
      <li>Look for Multitenant Isolation Mode by checking the <code>Network</code> custom resource for the <code>mode: Multitenant</code> configuration:</li>
    </ul>
  </li>
  <li><strong>100.64.0.0/16 and 100.88.0.0/16 Address Range Usage</strong>
    <ul>
      <li>OVN-Kubernetes uses the <code>100.64.0.0/16</code> and <code>100.88.0.0/16</code> IP range internally by default and this can not overlap.</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">oc get network/cluster -o json | jq '.spec | .clusterNetwork[].cidr,.serviceNetwork'</code></pre>
<blockquote>
  <p>&nbsp;It is also recommended to check with your datacenter networking team to verify these range are not used anywhere else on external networks within your OpenShift infrastructure.</p>
</blockquote>
<ul>
  <li><strong>Maximum Transmission Unit - MTU</strong>
    <ul>
      <li>During the limited live migration, both OVN-Kubernetes and OpenShift SDN run in parallel. OVN-Kubernetes manages the cluster network of some nodes, while OpenShift SDN manages the cluster network of others. To ensure that cross-CNI traffic remains functional, the Cluster Network Operator updates the routable MTU to ensure that both CNIs share the same overlay MTU. As a result, after the migration has completed, the cluster MTU is 50 bytes less.</li>
    </ul>
  </li>
  <li><strong>NodeNetworkConfigurationPolicy</strong>
    <ul>
      <li>The OpenShiftSDN CNI plugin supports a NodeNetworkConfigurationPolicy (NNCP) custom resource (CR) to configure the primary interface on a node. The OVN-Kubernetes network plugin does not have this capability.</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">oc get nncp</code></pre>
<ul>
  <li><strong>Multiple Network Interface Cards on a Node</strong>
    <ul>
      <li>if these secondary interfaces were set up on the default network interface card (NIC) of the host, using the network types like MACVLAN, IPVLAN, SR-IOV, or bridge interfaces with the default NIC as the control node, OVN-Kubernetes might encounter issues.</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext">oc get network-attachment-definitions -A</code></pre>
<ul>
  <li><strong>Static Routes and Routing Policies</strong>
    <ul>
      <li>If the cluster depends on static routes or routing policies via the host network so that pods can reach specific external destinations, you must set <code>routingViaHost</code> to <code>true</code> and <code>ipForwarding</code> to <code>Global</code> on the <code>gatewayConfig</code> key in the <code>network.operator.openshift.io</code> CR before you start the Limited Live Migration.</li>
    </ul>
  </li>
</ul>
<pre><code class="language-plaintext"> oc get network.operator.openshift.io cluster -o yaml</code></pre>
<ul>
  <li><strong>Unmanaged DaemonSets</strong></li>
  <li><strong>GitOps Configuration Management</strong></li>
  <li><strong>kube-proxy customization</strong></li>
</ul>
<p>&nbsp;</p>
